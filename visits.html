
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>訪問回数記録</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      padding: 1em;
      background-color: #f9f9f9;
    }
    h1 {
      text-align: center;
    }
    .table-container {
      overflow-x: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1em;
      min-width: 600px;
    }
    th, td {
      padding: 8px;
      text-align: left;
      white-space: nowrap;
    }
    tr:nth-child(even) {
      background-color: #f2f2f2;
    }
    button {
      margin-bottom: 1em;
      padding: 6px 12px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h1>訪問回数記録</h1>
  <button onclick="downloadCSV()">CSVダウンロード</button>
  <div class="table-container">
    <table id="visitTable" class="display">
      <thead>
        <tr><th>名前</th><th>訪問回数</th><th>日時</th><th>ユーザーID</th></tr>
      </thead>
      <tbody>
        <tr><td>ユーザーA</td><td>3</td><td>2024-06-14 12:34</td><td>abc123</td></tr>
        <tr><td>ユーザーB</td><td>1</td><td>2024-06-15 08:22</td><td>def456</td></tr>
        <tr><td>ユーザーC</td><td>2</td><td>2024-06-15 09:10</td><td>ghi789</td></tr>
        <!-- 必要に応じて追加 -->
      </tbody>
    </table>
  </div>

  <script>
    $(document).ready(function () {
      $('#visitTable').DataTable({
        "order": [[1, "desc"]],
        "pagingType": "simple",
        "language": {
          "paginate": {
            "previous": "前へ",
            "next": "次へ"
          },
          "info": "_TOTAL_ 件中 _START_ から _END_ を表示",
          "search": "検索:",
          "lengthMenu": "_MENU_ 件表示"
        },
        "dom": '<"top"p>rt<"bottom"lip><"clear">'
      });
    });

    function downloadCSV() {
      const table = document.getElementById("visitTable");
      let csv = "";
      for (let i = 0; i < table.rows.length; i++) {
        let row = [];
        for (let j = 0; j < table.rows[i].cells.length; j++) {
          row.push('"' + table.rows[i].cells[j].innerText + '"');
        }
        csv += row.join(",") + "
";
      }
      const blob = new Blob([csv], { type: "text/csv" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "visit_data.csv";
      a.click();
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>

