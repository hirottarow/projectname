
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>ガントチャートと絞り込みテーブル</title>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  h1, h2 { margin-top: 40px; margin-bottom: 10px; }
  .container {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
  }
  .filter-box {
    width: 48%;
  }
  table {
    border-collapse: collapse; width: 100%; margin-top: 10px;
  }
  th, td {
    border: 1px solid #ccc; padding: 8px; text-align: left;
  }
  th {
    cursor: pointer;
    background-color: #f0f0f0;
  }
  input[type="date"], input[type="text"] {
    width: 100%;
    padding: 5px;
    font-size: 16px;
    box-sizing: border-box;
  }
  label {
    display: block;
    margin-bottom: 10px;
  }
</style>
</head>
<body>

<h1>ガントチャート</h1>
<div>                        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script charset="utf-8" src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>                <div id="3db49a9e-1886-44bc-970e-9f765bd5d6d9" class="plotly-graph-div" style="height:600px; width:100%;"></div>            <script type="text/javascript">                window.PLOTLYENV=window.PLOTLYENV || {};                                if (document.getElementById("3db49a9e-1886-44bc-970e-9f765bd5d6d9")) {                    Plotly.newPlot(                        "3db49a9e-1886-44bc-970e-9f765bd5d6d9",                        [{"base":["2025-06-05T21:33:10.000000000","2025-06-06T12:01:13.000000000","2025-06-06T21:33:45.000000000","2025-06-07T12:01:36.000000000","2025-06-07T21:41:33.000000000","2025-06-08T21:02:29.000000000","2025-06-09T21:31:21.000000000","2025-06-10T12:04:47.000000000","2025-06-10T21:31:02.000000000","2025-06-11T12:30:24.000000000","2025-06-11T21:31:02.000000000","2025-06-12T12:03:58.000000000","2025-06-12T12:03:58.000000000","2025-06-12T21:31:17.000000000","2025-06-13T12:00:42.000000000","2025-06-13T21:46:19.000000000","2025-06-14T12:00:15.000000000","2025-06-14T21:36:05.000000000","2025-06-15T12:01:29.000000000"],"hovertemplate":"\u003cb\u003e%{hovertext}\u003c\u002fb\u003e\u003cbr\u003e\u003cbr\u003ename=%{y}\u003cbr\u003estart=%{base}\u003cbr\u003eend=%{x}\u003cextra\u003e\u003c\u002fextra\u003e","hovertext":["2025_0605_231734_61a5e3199543_message.json","2025_0606_120039_61a5e3199543_message.json","2025_0606_213257_61a5e3199543_message.json","2025_0607_120108_61a5e3199543_message.json","2025_0607_214130_61a5e3199543_message.json","2025_0608_210208_61a5e3199543_message.json","2025_0609_213106_61a5e3199543_message.json","2025_0610_120327_61a5e3199543_message.json","2025_0610_213027_61a5e3199543_message.json","2025_0611_122922_61a5e3199543_message.json","2025_0611_213022_61a5e3199543_message.json","2025_0612_120240_61a5e3199543_message.json","2025_0612_134844_61a5e3199543_message.json","2025_0612_213027_61a5e3199543_message.json","2025_0613_120004_61a5e3199543_message.json","2025_0613_214515_61a5e3199543_message.json","2025_0614_115946_61a5e3199543_message.json","2025_0614_213419_61a5e3199543_message.json","2025_0615_120234_61a5e3199543_message.json"],"legendgroup":"61a5e3199543","marker":{"color":"#636efa","pattern":{"shape":""}},"name":"61a5e3199543","orientation":"h","showlegend":true,"textposition":"auto","x":{"dtype":"i4","bdata":"aKaWAIgzTgDgn\u002fwA2JBfAEBRyADAGbIAeFq+AHiPTQDYY6UAsFtiAMgxkgCIu2EAaG1hAPhqnAAgbk4A+BrTAJhOUABoq6oAKPpuAA=="},"xaxis":"x","y":["61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543","61a5e3199543"],"yaxis":"y","type":"bar"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermap":[{"type":"scattermap","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"}}},"xaxis":{"anchor":"y","domain":[0.0,1.0],"type":"date","range":["2025-06-01T00:00:00+09:19","2025-06-15T14:02:42+09:00"],"showgrid":true,"zeroline":false,"gridcolor":"LightGray","dtick":"D1","tickformat":"%m\u002f%d","fixedrange":false},"yaxis":{"anchor":"x","domain":[0.0,1.0],"title":{"text":"name"},"categoryorder":"array","categoryarray":["61a5e3199543"],"autorange":"reversed","showgrid":true,"gridcolor":"LightGray","automargin":true,"fixedrange":true},"legend":{"title":{"text":"name"},"tracegroupgap":0},"title":{"text":"\u914d\u4fe1\u30ac\u30f3\u30c8\u30c1\u30e3\u30fc\u30c8\uff08\u30eb\u30fc\u30e0\u5225\uff09"},"barmode":"overlay","hoverlabel":{"bgcolor":"white"},"margin":{"l":120,"r":20,"t":40,"b":40},"height":600,"dragmode":"pan"},                        {"responsive": true}                    )                };            </script>        </div>

<div class="container">
  <div class="filter-box" id="calendar-filter">
    <h2>絞り込みカレンダー</h2>
    <label>開始日: <input type="date" id="filter-start" /></label>
    <label>終了日: <input type="date" id="filter-end" /></label>
  </div>
  <div class="filter-box" id="text-filter">
    <h2>絞り込みテキスト</h2>
    <label>配信者名で絞り込み: <input type="text" id="filter-name" placeholder="名前を入力" /></label>
    <label>ファイル名で絞り込み: <input type="text" id="filter-filename" placeholder="ファイル名を入力" /></label>
  </div>
</div>

<h2>フィルター・ソート付き配信一覧</h2>
<table id="stream-table">
  <thead>
    <tr>
      <th data-key="name">配信者名</th>
      <th data-key="start_str">開始日時</th>
      <th data-key="end_str">終了日時</th>
      <th data-key="duration">配信時間(分)</th>
      <th data-key="filename">ファイル名</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
const data = [{"id":1,"filename":"2025_0605_231734_61a5e3199543_message.json","name":"61a5e3199543","start":1749126790000,"end":1749136663000,"duration":164.55,"start_str":"2025-06-05 21:33:10","end_str":"2025-06-06 00:17:43"},{"id":2,"filename":"2025_0606_120039_61a5e3199543_message.json","name":"61a5e3199543","start":1749178873000,"end":1749183998000,"duration":85.4166666667,"start_str":"2025-06-06 12:01:13","end_str":"2025-06-06 13:26:38"},{"id":3,"filename":"2025_0606_213257_61a5e3199543_message.json","name":"61a5e3199543","start":1749213225000,"end":1749229781000,"duration":275.9333333333,"start_str":"2025-06-06 21:33:45","end_str":"2025-06-07 02:09:41"},{"id":4,"filename":"2025_0607_120108_61a5e3199543_message.json","name":"61a5e3199543","start":1749265296000,"end":1749271559000,"duration":104.3833333333,"start_str":"2025-06-07 12:01:36","end_str":"2025-06-07 13:45:59"},{"id":5,"filename":"2025_0607_214130_61a5e3199543_message.json","name":"61a5e3199543","start":1749300093000,"end":1749313221000,"duration":218.8,"start_str":"2025-06-07 21:41:33","end_str":"2025-06-08 01:20:21"},{"id":6,"filename":"2025_0608_210208_61a5e3199543_message.json","name":"61a5e3199543","start":1749384149000,"end":1749395821000,"duration":194.5333333333,"start_str":"2025-06-08 21:02:29","end_str":"2025-06-09 00:17:01"},{"id":7,"filename":"2025_0609_213106_61a5e3199543_message.json","name":"61a5e3199543","start":1749472281000,"end":1749484756000,"duration":207.9166666667,"start_str":"2025-06-09 21:31:21","end_str":"2025-06-10 00:59:16"},{"id":8,"filename":"2025_0610_120327_61a5e3199543_message.json","name":"61a5e3199543","start":1749524687000,"end":1749529770000,"duration":84.7166666667,"start_str":"2025-06-10 12:04:47","end_str":"2025-06-10 13:29:30"},{"id":9,"filename":"2025_0610_213027_61a5e3199543_message.json","name":"61a5e3199543","start":1749558662000,"end":1749569501000,"duration":180.65,"start_str":"2025-06-10 21:31:02","end_str":"2025-06-11 00:31:41"},{"id":10,"filename":"2025_0611_122922_61a5e3199543_message.json","name":"61a5e3199543","start":1749612624000,"end":1749619070000,"duration":107.4333333333,"start_str":"2025-06-11 12:30:24","end_str":"2025-06-11 14:17:50"},{"id":11,"filename":"2025_0611_213022_61a5e3199543_message.json","name":"61a5e3199543","start":1749645062000,"end":1749654643000,"duration":159.6833333333,"start_str":"2025-06-11 21:31:02","end_str":"2025-06-12 00:10:43"},{"id":12,"filename":"2025_0612_120240_61a5e3199543_message.json","name":"61a5e3199543","start":1749697438000,"end":1749703843000,"duration":106.75,"start_str":"2025-06-12 12:03:58","end_str":"2025-06-12 13:50:43"},{"id":13,"filename":"2025_0612_134844_61a5e3199543_message.json","name":"61a5e3199543","start":1749697438000,"end":1749703823000,"duration":106.4166666667,"start_str":"2025-06-12 12:03:58","end_str":"2025-06-12 13:50:23"},{"id":14,"filename":"2025_0612_213027_61a5e3199543_message.json","name":"61a5e3199543","start":1749731477000,"end":1749741728000,"duration":170.85,"start_str":"2025-06-12 21:31:17","end_str":"2025-06-13 00:22:08"},{"id":15,"filename":"2025_0613_120004_61a5e3199543_message.json","name":"61a5e3199543","start":1749783642000,"end":1749788782000,"duration":85.6666666667,"start_str":"2025-06-13 12:00:42","end_str":"2025-06-13 13:26:22"},{"id":16,"filename":"2025_0613_214515_61a5e3199543_message.json","name":"61a5e3199543","start":1749818779000,"end":1749832614000,"duration":230.5833333333,"start_str":"2025-06-13 21:46:19","end_str":"2025-06-14 01:36:54"},{"id":17,"filename":"2025_0614_115946_61a5e3199543_message.json","name":"61a5e3199543","start":1749870015000,"end":1749875278000,"duration":87.7166666667,"start_str":"2025-06-14 12:00:15","end_str":"2025-06-14 13:27:58"},{"id":18,"filename":"2025_0614_213419_61a5e3199543_message.json","name":"61a5e3199543","start":1749904565000,"end":1749915750000,"duration":186.4166666667,"start_str":"2025-06-14 21:36:05","end_str":"2025-06-15 00:42:30"},{"id":19,"filename":"2025_0615_120234_61a5e3199543_message.json","name":"61a5e3199543","start":1749956489000,"end":1749963762000,"duration":121.2166666667,"start_str":"2025-06-15 12:01:29","end_str":"2025-06-15 14:02:42"}];
let filteredData = data.slice();

const tbody = document.querySelector("#stream-table tbody");
const startInput = document.getElementById("filter-start");
const endInput = document.getElementById("filter-end");
const nameInput = document.getElementById("filter-name");
const filenameInput = document.getElementById("filter-filename");

function renderTable(data) {
    tbody.innerHTML = "";
    data.forEach(row => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${row.name}</td>
            <td>${row.start_str}</td>
            <td>${row.end_str}</td>
            <td>${row.duration.toFixed(2)}</td>
            <td>${row.filename}</td>
        `;
        tbody.appendChild(tr);
    });
}

function filterData() {
    const startDate = startInput.value ? new Date(startInput.value) : null;
    const endDate = endInput.value ? new Date(endInput.value) : null;
    const nameFilter = nameInput.value.trim().toLowerCase();
    const filenameFilter = filenameInput.value.trim().toLowerCase();

    filteredData = data.filter(row => {
        const start = new Date(row.start_str);
        const end = new Date(row.end_str);

        if (startDate && start < startDate) return false;
        if (endDate && end > endDate) return false;

        if (nameFilter && !row.name.toLowerCase().includes(nameFilter)) return false;
        if (filenameFilter && !row.filename.toLowerCase().includes(filenameFilter)) return false;

        return true;
    });
    renderTable(filteredData);
}

const headers = document.querySelectorAll("#stream-table th");
let sortKey = null;
let sortAsc = true;

headers.forEach(th => {
    th.addEventListener("click", () => {
        const key = th.getAttribute("data-key");
        if (sortKey === key) {
            sortAsc = !sortAsc;
        } else {
            sortKey = key;
            sortAsc = true;
        }
        filteredData.sort((a, b) => {
            if (a[key] < b[key]) return sortAsc ? -1 : 1;
            if (a[key] > b[key]) return sortAsc ? 1 : -1;
            return 0;
        });
        renderTable(filteredData);
    });
});

startInput.addEventListener("change", filterData);
endInput.addEventListener("change", filterData);
nameInput.addEventListener("input", filterData);
filenameInput.addEventListener("input", filterData);

renderTable(data);
</script>

</body>
</html>
