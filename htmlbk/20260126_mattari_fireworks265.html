<!DOCTYPE html>
<html lang='ja'>
<head>
<meta charset='UTF-8'>
<title>到達メンバー & ポイントランキング</title>
<script src="backups.js?v=1769461640"></script>
<style>
body { font-family: sans-serif; margin: 0; padding: 0; }
.container { display: flex; gap: 20px; padding: 10px; }
.column { flex: 1; overflow-x: auto; }
table { border-collapse: collapse; width: 100%; }
th, td { border: 1px solid #000; padding: 4px; text-align: left; }
th { background-color: #eee; cursor: pointer; }
.status-cell { text-align: center; font-weight: bold; width: 50px; }
.fr-cell { text-align: center; font-weight: bold; width: 40px; color: red; }
.button-container { margin-bottom: 10px; }
.toggle-btn {
    padding: 5px 10px;
    margin-right: 5px;
    cursor: pointer;
    border: 1px solid #666;
    background-color: #fff;
}
.toggle-btn.active { background-color: #4CAF50; color: #fff; }
header { padding: 10px; background:#333; color:#fff; text-align:center; }
header h1 { margin:0; font-size:1.5em; }
header h2 { margin:5px 0 0 0; font-size:1.2em; }
header p { margin:2px 0 0 0; font-size:1em; color:#ccc; }
.backup-selector {
    position: absolute;
    top: 10px;
    right: 10px;
}
.backup-selector select {
    padding: 5px 10px;
    font-size: 14px;
    border: 1px solid #666;
    border-radius: 4px;
    background-color: #fff;
    cursor: pointer;
}
</style>
</head>
<body>

<header>
<h2>まったり配信したいあなたへ♡みんなで花火を楽しもう！vol.265</h2>
<div class="backup-selector">
    <select id="backupFileSelector" onchange="navigateToBackup()">
        <option value="">-- 過去のイベント --</option>
    </select>
</div>
</header>

<div class="container">

  <!-- 左側: 到達者表 -->
  <div class="column">
    <h2>到達者（〇=確定 / △=保留）　目標ポイント：2025pt</h2>
    <div class="button-container">
      <span class="toggle-btn active">今回</span>
    </div>
    <table id="reachedTable">
    <thead>
      <tr>
        <th onclick="sortTable('reachedTable',0)">No</th>
        <th onclick="sortTable('reachedTable',1)">状態</th>
        <th onclick="sortTable('reachedTable',2)">画像</th>
        <th onclick="sortTable('reachedTable',3)">名前</th>
        <th onclick="sortTable('reachedTable',4)">ポイント</th>
        <th onclick="sortTable('reachedTable',5)">EEUID</th>
      </tr>
    </thead>
    <tbody>
<tr><td>2</td><td class='status-cell'>〇</td><td class='fr-cell'>✕</td><td>YOSHI🔱EMILY&YUHA🎗️コヘミ🌺</td><td>3250</td><td>2</td></tr>
<tr><td>1</td><td class='status-cell'>〇</td><td class='fr-cell'>✕</td><td>(無)🐒サルクサ🐒𝓡𝓮𝓷とママ🎗️</td><td>6360</td><td>1</td></tr>

    </tbody>
    </table>
  </div>

  <!-- 右側: ポイントランキング -->
  <div class="column">
    <h2>ポイントランキング</h2>
    <div class="button-container">
      <span class="toggle-btn active" id="btnCurrent" onclick="showRanking('current')">今回</span>
      <span class="toggle-btn" id="btnPrev" onclick="showRanking('prev')">前回</span>
    </div>

    <table id="rankingTable">
    <thead>
      <tr>
        <th onclick="sortTable('rankingTable',0)">No</th>
        <th onclick="sortTable('rankingTable',1)">名前</th>
        <th onclick="sortTable('rankingTable',2)">ポイント</th>
      </tr>
    </thead>
    <tbody>
<tr class='current'><td>1</td><td>(無)🐒サルクサ🐒𝓡𝓮𝓷とママ🎗️</td><td>6360</td></tr>
<tr class='current'><td>2</td><td>YOSHI🔱EMILY&YUHA🎗️コヘミ🌺</td><td>3250</td></tr>
<tr class='current'><td>3</td><td>ハムハム ❅YUHA🎗[感謝🙏]</td><td>1784</td></tr>
<tr class='current'><td>4</td><td>アイス大好き🎗️</td><td>1068</td></tr>
<tr class='current'><td>5</td><td>ひろちゃん🎗️</td><td>969</td></tr>
<tr class='current'><td>6</td><td>wanko🎗️</td><td>919</td></tr>
<tr class='current'><td>7</td><td>hiro☆akashima吉26 小&大25　　小吉24</td><td>784</td></tr>
<tr class='current'><td>8</td><td>KUMA🐻 YUHA🎗</td><td>736</td></tr>
<tr class='current'><td>9</td><td>❄いなっちくん🎗❄‪</td><td>420</td></tr>
<tr class='current'><td>10</td><td>剣(つるぎ）♡いと愛し♡🎗️🦌♨️㊸</td><td>420</td></tr>
<tr class='current'><td>11</td><td>kokoro🎗️YUHA🎗</td><td>393</td></tr>
<tr class='current'><td>12</td><td>夜🌃)ᘮㄋ@YUHA🎗</td><td>384</td></tr>
<tr class='current'><td>13</td><td>しんくんたん【さん付け不要】🎗🖤🐨 Ω</td><td>350</td></tr>
<tr class='current'><td>14</td><td>EMILY🔱Ψ( ⁎ᵕᴗᵕ⁎ )Ψ🐒🐰</td><td>300</td></tr>
<tr class='current'><td>15</td><td>マル(♍@いろは🌺𝒦𝓊𝓇ℴ姫🌺🎗</td><td>288</td></tr>
<tr class='current'><td>16</td><td>(寝落ち寸前)さくらんぼっち⚯ 🎗ゆらゆら彡︎✿</td><td>252</td></tr>
<tr class='current'><td>17</td><td>ヒマジン</td><td>240</td></tr>
<tr class='current'><td>18</td><td>T (ティー)@こがちゃん</td><td>216</td></tr>
<tr class='current'><td>19</td><td>るぴん</td><td>192</td></tr>
<tr class='current'><td>20</td><td>ステラ☆彡</td><td>168</td></tr>
<tr class='current'><td>21</td><td>ウーロン</td><td>168</td></tr>
<tr class='current'><td>22</td><td>Stalagスタラグ</td><td>156</td></tr>
<tr class='current'><td>23</td><td>O次郎（オージロウ）</td><td>156</td></tr>
<tr class='current'><td>24</td><td>らいでん@こがちゃん</td><td>144</td></tr>
<tr class='current'><td>25</td><td>とんぷぅ♬</td><td>144</td></tr>
<tr class='current'><td>26</td><td>赤鬼（あい子おやじ）暫定2位感謝@きんぺた</td><td>125</td></tr>
<tr class='current'><td>27</td><td>🔰空色えんぴつ</td><td>120</td></tr>
<tr class='current'><td>28</td><td>you-look🐷🍣♥️</td><td>120</td></tr>
<tr class='current'><td>29</td><td>ひげっち⚡️えんな海賊団💎🏴‍☠️🍙</td><td>120</td></tr>
<tr class='current'><td>30</td><td>佳華🤍🫧あざらしあつめたい(•ω• ⊃ )3</td><td>120</td></tr>
<tr class='current'><td>31</td><td>🈚️ひろきち</td><td>120</td></tr>
<tr class='current'><td>32</td><td>🎗 あ 🌷 ず 🐰</td><td>120</td></tr>
<tr class='current'><td>33</td><td>タカ1221 🍎🐛🍑🏹</td><td>120</td></tr>
<tr class='current'><td>34</td><td>ゅん。𝄑𝄑🐶𝄑𝄑</td><td>120</td></tr>
<tr class='current'><td>35</td><td>【無】まる</td><td>120</td></tr>
<tr class='current'><td>36</td><td>ピカちゃん</td><td>120</td></tr>
<tr class='current'><td>37</td><td>六供音🌻みこるーむ🍓with バラクーダ</td><td>120</td></tr>
<tr class='current'><td>38</td><td>ﾐﾙｸ 🍼 🌻 YUHA🎗</td><td>120</td></tr>
<tr class='current'><td>39</td><td>夜風(よかぜ)</td><td>120</td></tr>
<tr class='current'><td>40</td><td>ホタテ屋🌟🧸　🌺🐈🌎</td><td>120</td></tr>
<tr class='current'><td>41</td><td>🈚️ゆら音</td><td>120</td></tr>
<tr class='current'><td>42</td><td>バラック@無音投げ逃げかひっそり潜り中</td><td>120</td></tr>
<tr class='current'><td>43</td><td>ＴＡＫＵＳＡＮ@Mio🍨🌷/吉瀬歩実ガチ❗初枠21:30</td><td>120</td></tr>
<tr class='current'><td>44</td><td>Dracoドラコ</td><td>120</td></tr>
<tr class='current'><td>45</td><td>修理屋</td><td>120</td></tr>
<tr class='current'><td>46</td><td>ましろくん。@竹永あやの🐷🍣🩷リベンジガチ🐎</td><td>120</td></tr>
<tr class='current'><td>47</td><td>カズ🌸💫</td><td>120</td></tr>
<tr class='current'><td>48</td><td>寝坊助まなたん٩(*´︶`*)۶えんな☆ライガーゼロ</td><td>120</td></tr>
<tr class='current'><td>49</td><td>ジャックん＠🎗🐠🏀🩵🐰🌧️🦔🌸</td><td>120</td></tr>
<tr class='current'><td>50</td><td>しんげつ◢⁴⁶【かえで守護隊⚔️タカ派急先鋒】</td><td>120</td></tr>
<tr class='current'><td>51</td><td>無わち👑🎼</td><td>120</td></tr>
<tr class='current'><td>52</td><td>ドゥラーフ、YUHA応援ルームアミ応援ルーム、</td><td>120</td></tr>
<tr class='current'><td>53</td><td>*¨*</td><td>120</td></tr>
<tr class='current'><td>54</td><td>bdss@⭕️あこ@明莉@りせなー@みつ会@荒咲要@☀️🌺</td><td>120</td></tr>
<tr class='current'><td>55</td><td>わいわい🧸🌻🎗️⛄</td><td>120</td></tr>
<tr class='current'><td>56</td><td>たけまる@吉田笑夢💜えむの小悪魔るーむ</td><td>120</td></tr>
<tr class='current'><td>57</td><td>2/14🎗初ファンミ🌻🌈🍀︎ 🔱🍎🐛</td><td>120</td></tr>
<tr class='current'><td>58</td><td>💕ティアラ𓂃𓈒𓏸︎︎︎︎👑1月🎂 ✨</td><td>120</td></tr>
<tr class='current'><td>59</td><td>【】かむっP☺︎【旧姓：かむにい】</td><td>120</td></tr>
<tr class='current'><td>60</td><td>tooru‪ ஐ‬⋆*@ ꕤ彩葉ねいろꕤ</td><td>120</td></tr>
<tr class='current'><td>61</td><td>のーちゃん ちゃん (｡・﹃・｡)</td><td>119</td></tr>
<tr class='current'><td>62</td><td>すどっち</td><td>118</td></tr>
<tr class='current'><td>63</td><td>ひなたの父さん🌲🧘‍♀️</td><td>118</td></tr>
<tr class='current'><td>64</td><td>laid back🎗️</td><td>108</td></tr>
<tr class='current'><td>65</td><td>じゅんな_ゆうな@秋𠮷優花🎀🌈🍑🏹💖</td><td>47</td></tr>
<tr class='current'><td>66</td><td>🐬ふかっちゃん☘️🧚</td><td>12</td></tr>
<tr class='current'><td>67</td><td>💙🤍ワダケン🤍💙</td><td>12</td></tr>
<tr class='current'><td>68</td><td>RAGALE</td><td>12</td></tr>
<tr class='current'><td>69</td><td>✺tomoシーズｰ🐶🦴</td><td>12</td></tr>
<tr class='current'><td>70</td><td>ヒー坊🩵🐄🍁</td><td>12</td></tr>
<tr class='current'><td>71</td><td>【無音】はるネコ🍮ⓜ</td><td>12</td></tr>
<tr class='current'><td>72</td><td>🍀🎤ダーマン🤹‍♀️🌸</td><td>12</td></tr>
<tr class='current'><td>73</td><td>안현후(アンヒョンフ)</td><td>12</td></tr>
<tr class='current'><td>74</td><td>そのみ</td><td>1</td></tr>

    </tbody>
    </table>
  </div>

</div>

<script>
// バックアップファイルリストの初期化（JSから読み込み）
document.addEventListener('DOMContentLoaded', function() {
    var selector = document.getElementById('backupFileSelector');
    if (!selector) return;

    // 既存のリストをクリア
    selector.innerHTML = '<option value="">-- 過去のイベント --</option>';

    if (typeof window.BACKUP_FILES !== 'undefined') {
        window.BACKUP_FILES.forEach(function(file) {
            var option = document.createElement('option');
            // file は "htmlbk/filename.html" の形式を想定
            option.value = file;
            option.textContent = file.split('/').pop(); // ファイル名のみ表示
            
            // 現在のファイルを選択状態にする
            var currentFile = window.location.pathname.split('/').pop();
            try { currentFile = decodeURIComponent(currentFile); } catch(e) {}
            
            if (file.endsWith(currentFile)) {
                option.selected = true;
            }
            selector.appendChild(option);
        });
    }
});

// バックアップファイルへのナビゲーション
function navigateToBackup() {
    var selector = document.getElementById('backupFileSelector');
    var selectedFile = selector.value;
    if (selectedFile) {
        // 現在のパスが htmlbk を含んでいるか
        var path = window.location.pathname;
        var inHtmlBk = path.includes("htmlbk") || path.includes("_"); // 簡易判定: サブフォルダ内なら
        
        // selectedFile は "htmlbk/xxx.html" または "xxx.html" (update_backups_jsの実装に依存)
        // ここでは update_backups_js が "filename.html" だけを返すか、"htmlbk/filename.html" を返すかで分岐
        
        // 統一: BACKUP_FILES には "htmlbk/filename.html" という相対パスが入っていると仮定
        // rootから見るならそのまま。htmlbk内から見るなら "../" が必要？
        // いや、シンプルにファイル名だけ入れておいて、遷移ロジックで吸収する方がいいかも。
        
        // ★今回は update_backups_js で「ファイル名のみ」を格納することにします。
        
        // 修正: 確実に htmlbk フォルダ内かどうかを判定し、遷移先を決める
        
        // 現在のURLが "htmlbk/" を含んでいるか、または "htmlbk" フォルダ内のファイルか
        // ファイル名が backups.js のある場所と同じなら、それは htmlbk 内。
        // しかし backups.js は相対パスで読んでいるだけかもしれない。
        
        // 単純に現在のパスを確認
        if (location.pathname.indexOf("/htmlbk/") !== -1) {
             // 既に htmlbk 内にいるなら、ファイル名だけでOK
             window.location.href = selectedFile;
        } else {
             // ルートにいるなら、htmlbk/ を付ける
             // ただし、もし既に "htmlbk/" が付いていないおかしな状態のファイル（ルートにある過去ログ）から飛ぼうとしている場合でも
             // htmlbk/ を付ければ正しい場所（htmlbkフォルダ）に行けるはず。
             window.location.href = "htmlbk/" + selectedFile;
        }
    }
}

// 汎用テーブルソート関数
function sortTable(tableId, n) {
    var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
    table = document.getElementById(tableId);
    switching = true;
    dir = "asc";
    while (switching) {
        switching = false;
        rows = table.rows;
        for (i = 1; i < (rows.length - 1); i++) {
            shouldSwitch = false;
            x = rows[i].getElementsByTagName("TD")[n];
            y = rows[i + 1].getElementsByTagName("TD")[n];
            let xContent = isNaN(x.innerHTML) ? x.innerHTML.toLowerCase() : parseFloat(x.innerHTML);
            let yContent = isNaN(y.innerHTML) ? y.innerHTML.toLowerCase() : parseFloat(y.innerHTML);
            if (dir == "asc") {
                if (xContent > yContent) { shouldSwitch = true; break; }
            } else if (dir == "desc") {
                if (xContent < yContent) { shouldSwitch = true; break; }
            }
        }
        if (shouldSwitch) {
            rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
            switching = true;
            switchcount++;
        } else {
            if (switchcount == 0 && dir == "asc") { dir = "desc"; switching = true; }
        }
    }
}

// 今回/前回切替
var currentRanking = `1,(無)🐒サルクサ🐒𝓡𝓮𝓷とママ🎗️,6360
2,YOSHI🔱EMILY&YUHA🎗️コヘミ🌺,3250
3,ハムハム ❅YUHA🎗[感謝🙏],1784
4,アイス大好き🎗️,1068
5,ひろちゃん🎗️,969
6,wanko🎗️,919
7,hiro☆akashima吉26 小&大25　　小吉24,784
8,KUMA🐻 YUHA🎗,736
9,❄いなっちくん🎗❄‪,420
10,剣(つるぎ）♡いと愛し♡🎗️🦌♨️㊸,420
11,kokoro🎗️YUHA🎗,393
12,夜🌃)ᘮㄋ@YUHA🎗,384
13,しんくんたん【さん付け不要】🎗🖤🐨 Ω,350
14,EMILY🔱Ψ( ⁎ᵕᴗᵕ⁎ )Ψ🐒🐰,300
15,マル(♍@いろは🌺𝒦𝓊𝓇ℴ姫🌺🎗,288
16,(寝落ち寸前)さくらんぼっち⚯ 🎗ゆらゆら彡︎✿,252
17,ヒマジン,240
18,T (ティー)@こがちゃん,216
19,るぴん,192
20,ステラ☆彡,168
21,ウーロン,168
22,Stalagスタラグ,156
23,O次郎（オージロウ）,156
24,らいでん@こがちゃん,144
25,とんぷぅ♬,144
26,赤鬼（あい子おやじ）暫定2位感謝@きんぺた,125
27,🔰空色えんぴつ,120
28,you-look🐷🍣♥️,120
29,ひげっち⚡️えんな海賊団💎🏴‍☠️🍙,120
30,佳華🤍🫧あざらしあつめたい(•ω• ⊃ )3,120
31,🈚️ひろきち,120
32,🎗 あ 🌷 ず 🐰,120
33,タカ1221 🍎🐛🍑🏹,120
34,ゅん。𝄑𝄑🐶𝄑𝄑,120
35,【無】まる,120
36,ピカちゃん,120
37,六供音🌻みこるーむ🍓with バラクーダ,120
38,ﾐﾙｸ 🍼 🌻 YUHA🎗,120
39,夜風(よかぜ),120
40,ホタテ屋🌟🧸　🌺🐈🌎,120
41,🈚️ゆら音,120
42,バラック@無音投げ逃げかひっそり潜り中,120
43,ＴＡＫＵＳＡＮ@Mio🍨🌷/吉瀬歩実ガチ❗初枠21:30,120
44,Dracoドラコ,120
45,修理屋,120
46,ましろくん。@竹永あやの🐷🍣🩷リベンジガチ🐎,120
47,カズ🌸💫,120
48,寝坊助まなたん٩(*´︶`*)۶えんな☆ライガーゼロ,120
49,ジャックん＠🎗🐠🏀🩵🐰🌧️🦔🌸,120
50,しんげつ◢⁴⁶【かえで守護隊⚔️タカ派急先鋒】,120
51,無わち👑🎼,120
52,ドゥラーフ、YUHA応援ルームアミ応援ルーム、,120
53,*¨*,120
54,bdss@⭕️あこ@明莉@りせなー@みつ会@荒咲要@☀️🌺,120
55,わいわい🧸🌻🎗️⛄,120
56,たけまる@吉田笑夢💜えむの小悪魔るーむ,120
57,2/14🎗初ファンミ🌻🌈🍀︎ 🔱🍎🐛,120
58,💕ティアラ𓂃𓈒𓏸︎︎︎︎👑1月🎂 ✨,120
59,【】かむっP☺︎【旧姓：かむにい】,120
60,tooru‪ ஐ‬⋆*@ ꕤ彩葉ねいろꕤ,120
61,のーちゃん ちゃん (｡・﹃・｡),119
62,すどっち,118
63,ひなたの父さん🌲🧘‍♀️,118
64,laid back🎗️,108
65,じゅんな_ゆうな@秋𠮷優花🎀🌈🍑🏹💖,47
66,🐬ふかっちゃん☘️🧚,12
67,💙🤍ワダケン🤍💙,12
68,RAGALE,12
69,✺tomoシーズｰ🐶🦴,12
70,ヒー坊🩵🐄🍁,12
71,【無音】はるネコ🍮ⓜ,12
72,🍀🎤ダーマン🤹‍♀️🌸,12
73,안현후(アンヒョンフ),12
74,そのみ,1`;
var prevRanking = ``;

function showRanking(which) {
    var tbody = document.getElementById('rankingTable').getElementsByTagName('tbody')[0];
    tbody.innerHTML = '';
    var data = (which==='current') ? currentRanking : prevRanking;
    var rows = data.split('\n');
    for(var i=0;i<rows.length;i++){
        if(!rows[i]) continue;
        var cols = rows[i].split(',');
        var tr = document.createElement('tr');
        for(var j=0;j<cols.length;j++){
            var td = document.createElement('td');
            td.textContent = cols[j];
            tr.appendChild(td);
        }
        tbody.appendChild(tr);
    }
    document.getElementById('btnCurrent').classList.toggle('active', which==='current');
    document.getElementById('btnPrev').classList.toggle('active', which==='prev');
}
</script>

</body>
</html>
